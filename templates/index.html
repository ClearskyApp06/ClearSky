{% extends "base.html" %}

{% block content %}
    <div class="form-container">
        <form action="/selection_handle" method="POST">
            <div class="form-group">
                <label for="identifier">Enter DID or Handle:</label>
                <input type="text" name="identifier" id="identifier" class="form-control">
                <input type="hidden" name="identifier_hidden" id="identifier_hidden" value="">
            </div>
            <div class="form-group">
                <label for="selection">Select an option:</label>
                <select name="selection" id="selection" class="form-control">
                    <option value="1">Get DID</option>
                    <option value="2">Get Handle</option>
                    <option value="3">Get Block List of a User</option>
                    <option value="4">Get Total Users Count</option>
                    <option value="5">Get Blocks of single user</option>
                </select>
            </div>
            <div class="form-group">
                <input type="submit" value="Submit" class="btn btn-primary">
            </div>
        </form>
    </div>

<script>
        const selection = document.getElementById('selection');
        const identifier = document.getElementById('identifier');
        const identifierHidden = document.getElementById('identifier_hidden');

        // Add event listener to the selection dropdown
        selection.addEventListener('change', function() {
            if (selection.value === '4') {
                // If "Get Total Users Count" is selected, disable the identifier field and update the hidden field
                identifier.readOnly = true;
                identifierHidden.value = identifier.value;
                identifier.value = '';
            } else {
                // Enable the identifier field and clear the hidden field
                identifier.readOnly = false;
                identifierHidden.value = '';
            }
        });
    </script>
{% endblock %}
